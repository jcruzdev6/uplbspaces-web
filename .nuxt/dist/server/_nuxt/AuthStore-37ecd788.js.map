{"version":3,"file":"AuthStore-37ecd788.js","sources":["../../../../stores/AuthStore.js"],"sourcesContent":["import { defineStore } from \"pinia\";\n\nexport const useAuthStore = defineStore(\"auth\", {\n    state: () => ({\n        user: null\n    }),\n    getters: {\n        isLoggedIn(state) {\n            return state.user != null;\n        },\n    }, \n    actions: {\n        async logout() {\n            await useApiFetch(\"/api/auth/signout\", { method: \"POST\" });\n            this.user = null;\n            navigateTo(\"/\");\n        },\n        async fetchUser() {\n            console.log('fetchUser called')\n            const { data, error } = await useApiFetch(\"/api/user\");\n            console.log('data:')\n            console.log(data.value)\n            console.log('error:')\n            console.log(error.value)\n            if (data.value) this.user = data.value;\n        },\n        async signin(credentials) {\n            await useApiFetch(\"/sanctum/csrf-cookie\");\n            \n            const { data, error } = await useApiFetch(\"/api/auth/signin\", {\n                method: \"POST\",\n                body: credentials,\n            });\n            console.log('signin called')\n            console.log('data:')\n            console.log(data.value)\n            console.log('error:')\n            console.log(error.value)\n\n            await this.fetchUser();\n\n            return { data, error };\n        },\n        async signup(info) {\n            await useApiFetch(\"/sanctum/csrf-cookie\");\n        \n            const signup = await useApiFetch(\"/auth/signup\", {\n                method: \"POST\",\n                body: info,\n            });\n        \n            await this.fetchUser();\n        \n            return signup;\n        },\n    },\n});"],"names":[],"mappings":";;;;;;;AAEY,MAAC,eAAe,YAAY,QAAQ;AAAA,EAC5C,OAAO,OAAO;AAAA,IACV,MAAM;AAAA,EACd;AAAA,EACI,SAAS;AAAA,IACL,WAAW,OAAO;AACd,aAAO,MAAM,QAAQ;AAAA,IACxB;AAAA,EACJ;AAAA,EACD,SAAS;AAAA,IACL,MAAM,SAAS;AACX,YAAM,YAAY,qBAAqB,EAAE,QAAQ,OAAQ,CAAA;AACzD,WAAK,OAAO;AACZ,iBAAW,GAAG;AAAA,IACjB;AAAA,IACD,MAAM,YAAY;AACd,cAAQ,IAAI,kBAAkB;AAC9B,YAAM,EAAE,MAAM,MAAK,IAAK,MAAM,YAAY,WAAW;AACrD,cAAQ,IAAI,OAAO;AACnB,cAAQ,IAAI,KAAK,KAAK;AACtB,cAAQ,IAAI,QAAQ;AACpB,cAAQ,IAAI,MAAM,KAAK;AACvB,UAAI,KAAK;AAAO,aAAK,OAAO,KAAK;AAAA,IACpC;AAAA,IACD,MAAM,OAAO,aAAa;AACtB,YAAM,YAAY,sBAAsB;AAExC,YAAM,EAAE,MAAM,MAAO,IAAG,MAAM,YAAY,oBAAoB;AAAA,QAC1D,QAAQ;AAAA,QACR,MAAM;AAAA,MACtB,CAAa;AACD,cAAQ,IAAI,eAAe;AAC3B,cAAQ,IAAI,OAAO;AACnB,cAAQ,IAAI,KAAK,KAAK;AACtB,cAAQ,IAAI,QAAQ;AACpB,cAAQ,IAAI,MAAM,KAAK;AAEvB,YAAM,KAAK;AAEX,aAAO,EAAE,MAAM;IAClB;AAAA,IACD,MAAM,OAAO,MAAM;AACf,YAAM,YAAY,sBAAsB;AAExC,YAAM,SAAS,MAAM,YAAY,gBAAgB;AAAA,QAC7C,QAAQ;AAAA,QACR,MAAM;AAAA,MACtB,CAAa;AAED,YAAM,KAAK;AAEX,aAAO;AAAA,IACV;AAAA,EACJ;AACL,CAAC;"}